(()=>{"use strict";jQuery(document).ready((function(){const e=jQuery,{ajaxurl:t,nonce:n,text:s,options:i}=devnet_pph_pa_script,o={processing:!1,processingElement:{},productType:"simple",isVariation:!1,loader(t){t&&this.processingElement instanceof jQuery?this.processingElement.append('<div id="pph-spinner"></div>'):e("#pph-spinner").remove()},get isProcessing(){return this.processing},set isProcessing(e){this.processing=e,this.loader(this.processing)}};const c=e("form.pph-price-alert-form"),a=e(".pph-pa-form-wrapper");function r(){a.removeClass("pph-modal-open").hide()}e(".pph-pa-btn").on("click",(function(t){t.preventDefault(),function(t){const n='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',s=t.find(n)[0],i=t.find(n),o=i[i.length-1];setTimeout((()=>{s.focus()}),0),e(document).on("keydown",(function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===s&&(o.focus(),e.preventDefault()):document.activeElement===o&&(s.focus(),e.preventDefault()))}))}(c),a.addClass("pph-modal-open").show()})),e(".pph-pa-close").on("click",(function(e){e.preventDefault(),r()})),a.on("mousedown touchstart",(function(e){e.target===this&&r()})),e(document).on("keydown",(function(e){"Escape"===e.key&&r()})),c.on("submit",(async function(c){if(c.preventDefault(),o.isProcessing)return!1;o.processingElement=e(this),o.isProcessing=!0,e(this).addClass("processing");const a=e(this).serializeArray().reduce(((e,t)=>(e[t.name]=t.value,e)),{});e(this).find("button").prop("disabled",!0);const r=await async function(s="",i={},o="get"){if(!s)return!1;let c;try{c=await e.ajax({type:o,url:t,data:{action:s,args:i,security:n}})}catch(e){console.error("ERROR: ",e)}return c}("pph_user_subscribe",{formData:a},"post");o.isProcessing=!1,["created","updated"].includes(r.status)&&("1"==i.double_opt_in&&"1"!=r.optin?e(this).append(`<div class="pph-message">${s.confirm_email}</div>`):e(this).append('<div class="pph-success-animation">\n\t\t<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" /><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" /></svg>\n\t\t</div>'),e(this).addClass("submitted")),e(this).find("button").prop("disabled",!1),e(this).removeClass("processing")})),e(document).on("found_variation","form.cart",(function(t,n){const s=n.variation_id;e('[name="pph_pa_product_id"]').val(s)})),e(document).on("reset_data","form.cart",(function(){const t=e(this).data("product_id"),n=e('[name="pph_pa_product_id"]');t!==n.val()&&n.val(t)}))}))})();